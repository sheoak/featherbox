/*!
 * featherbox.js
 * Copyright (C) 2014 sheoak <dev@sheoak.fr>
 * Distributed under terms of the MIT license.
 */
define(["jquery"],function(){"use strict";return{box:false,mask:false,config:{fadeDuration:400,closeButton:true,selector:"[data-featherbox]",classname:"goose"},init:function(config){var self=this;this.configure(config);$(document).ready(function(){$(self.config.selector).click(function(e){e.preventDefault();self.open($(this))})})},configure:function(config){this.config=$.extend({},this.config,config)},open:function(link,config){var self=this,href=link.attr("href"),body=$("body");config=$.extend({},this.config,config);if(this.box===false){this.box=$("<div>").addClass("featherbox "+config.classname).appendTo(body)}if(this.mask===false){this.mask=$("<div>").addClass("feathermask");body.append(this.mask);this.mask.click(function(e){self.hide()})}self.show();$.get(href,function(data){body.removeClass("featherbox-loading");self.box.html(data);if(config.closeButton){var btn=$("<button>").html("Ã—").attr("data-featherbox-close","1").addClass("featherbox-close").click(function(){self.hide()});self.box.append(btn)}})},show:function(){$("body").addClass("featherbox-opened featherbox-loading");this.box.fadeIn(this.config.fadeDuration);this.mask.fadeIn(this.config.fadeDuration)},hide:function(){this.box.fadeOut(this.config.fadeDuration);this.mask.fadeOut(this.config.fadeDuration);$("body").removeClass("featherbox-opened")},close:function(){this.mask.remove();this.box.remove();this.mask=false;this.box=false}}});